<div class="transaction-container">
  <div class="label">
    <div class="head">Transaction Summary</div>
    <div class="row">
      <ul class="nav nav-pills justify-content-center">
        <li class="nav-item">
          <a class="nav-link" data-bs-toggle="pill" href="#last">Last Financial Year (21/22)</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" data-bs-toggle="pill" href="#current">Current Financial Year (22/23)</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-bs-toggle="pill" href="#month"><%= Time.now.strftime("%B") %></a>
        </li>
      </ul>
    </div>
  </div>

  <div class="tab-content">


    <div class="tab-pane container fade" id="last">
      <div class="row justify-content-center">
        <div class="d-flex flex-row details">
          <div class="left-col">
            <h5>Date</h5>
          </div>
          <div class="desc-col text-center">
            <h5>Description</h5>
          </div>
          <div class="amnt-col">
            <h5>Amount</h5>
          </div>
        </div>
        <div class="summary-box">
          <% if @last.empty? %>
            <div class="no-data">
              There is no data recorded for this time period
            </div>
          <% else %>
            <% @last.each do |transaction| %>
              <div class="d-flex flex-row list <%= transaction.cash_flow_type == "Revenue" ? "light-green" : "light-red" %>">
                <div class="left-col">
                  <%= transaction.date.strftime("%Y %b %d ") %>
                </div>
                <div class="w-75 text-start">
                  <%= transaction.description %>
                </div>
                <% if transaction.cash_flow_type == "Revenue" %>
                  <div class="pos">
                    $<%= transaction.amount.round %> <i class="green fa-solid fa-caret-up"></i>
                  </div>
                <% else %>
                  <div class="pos">
                    $<%= transaction.amount.round %> <i class="red fa-solid fa-caret-down"></i>
                  </div>
                <% end %>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>


    <div class="tab-pane container active" id="current">
      <div class="row justify-content-center">
          <div class="d-flex flex-row details">
            <div class="left-col">
              <h5>Date</h5>
            </div>
            <div class="desc-col text-center">
              <h5>Description</h5>
            </div>
            <div class="amnt-col">
              <h5>Amount</h5>
            </div>
          </div>
          <div class="summary-box">
            <% if @current.empty? %>
              <div class="no-data">
                <p>There is no data recorded for this time period</p>
              </div>
            <% else %>
              <% @current.each do |transaction| %>
                <div class="d-flex flex-row list <%= transaction.cash_flow_type == "Revenue" ? "light-green" : "light-red" %>">
                  <div class="left-col">
                    <%= transaction.date.strftime("%Y %b %d ") %>
                  </div>
                  <div class="w-75 text-start">
                    <%= transaction.description %>
                    <%= link_to "delete", transaction_path(transaction), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this transaction?" } %>
                    <a class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" id="add-transaction-button" data-action="click->update-modal#updateForm">
                    Edit<span class="d-none" id="propertyId"><%= @property.id %></span><span class="d-none" id="transactionId"><%= transaction.id %></span>
                    </a>
                  </div>
                  <% if transaction.cash_flow_type == "Revenue" %>
                    <div class="pos">
                      $<%= transaction.amount.round %> <i class="green fa-solid fa-caret-up"></i>
                    </div>
                  <% else %>
                    <div class="pos">
                      $<%= transaction.amount.round %> <i class="red fa-solid fa-caret-down"></i>
                    </div>
                  <% end  %>
                </div>
              <% end %>
            <% end %>
            <div class="summary-footer">
              total = <%= @current_count.round %>
            </div>
          </div>
      </div>
    </div>


    <div class="tab-pane container fade" id="month">
      <div class="row justify-content-center">
          <div class="d-flex flex-row details">
            <div class="left-col">
              <h5>Date</h5>
            </div>
            <div class="desc-col text-center">
              <h5>Description</h5>
            </div>
            <div class="amnt-col">
              <h5>Amount</h5>
            </div>
          </div>
          <div class="summary-box">
            <% if @month.empty? %>
              <div class="no-data">
                <p>There is no data recorded for this time period</p>
              </div>
            <% else %>
              <% @month.each do |transaction| %>
                <div class="d-flex flex-row list <%= transaction.cash_flow_type == "Revenue" ? "light-green" : "light-red" %>">
                  <div class="left-col">
                    <%= transaction.date.strftime("%b %d") %>
                  </div>
                  <div class="w-75 text-start">
                    <%= transaction.description %>
                  </div>
                  <% if transaction.cash_flow_type == "Revenue" %>
                    <div class="pos">
                      $<%= transaction.amount.round %> <i class="green fa-solid fa-caret-up"></i>
                    </div>
                  <% else %>
                    <div class="pos">
                      $<%= transaction.amount.round %> <i class="red fa-solid fa-caret-down"></i>
                    </div>
                  <% end  %>
                </div>
              <% end %>
            <% end  %>
          </div>
      </div>
    </div>
  </div>
</div>

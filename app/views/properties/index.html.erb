<div class="index-container">
  <div class="row d-flex">
    <div class="col-6 detailbox">
      <div class="indexOverview--header">
        <p class="indexOverview--headerIn">
          <H1>Overview</H1>
        </p>
      </div>
      <div class="graph bg-white rounded">
        <% data_hash = {} %>
        <% Property.all.each do |property| %>
          <% data_hash[property.address] = property.total_profit %>
        <% end %>
        <%= column_chart data_hash, title: "All Properties (Net Income)", prefix: "$", download: {background: "#ffffff"}, colors: ["#f6bd60", "#84a59d", "#f7ede2", "#f5cac3", "#f28482"] %>
      </div>
      <div class="indexOverview--header">
        <p class="indexOverview--headerIn">
          <H1>Properties Location</H1>
        </p>
      </div>
      <div style="width: 100%; height: 300px; border-radius: 5px;"
        data-controller="map"
        data-map-marker-value="<%= @marker.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
    </div>

    <div class="col-6 propertybox">
      <div>
        <% @properties.each do |property| %>
          <%= link_to property_path(property) do %>
            <div class="indexpanel">
              <div class="indexOverview--header">
                <p class="indexOverview--headerIn">
                  <H1><%= property.address%></H1>
                </p>
              </div>
              <div class="indexOverview--body">
                <%= cl_image_tag property.photo.key, id: "propimg" %>
                <div class="summary">
                  <ul>
                    <li><i class="fa-regular fa-bed"></i>2</li>
                    <li>Profit: <%= property.total_profit %></li>
                    <li>Bedrooms: <%= property.bedrooms  %></li>
                  </ul>
                </div>
              </div>
            </div>
          <%end %>
        <%end %>
      </div>
    </div>
  </div>
</div>
